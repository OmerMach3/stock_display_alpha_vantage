<div class="container">
  <header class="animated-header">
    <h1 class="title-gradient">NASDAQ PRICE DISPLAY</h1>
    <div class="header-decoration"></div>
  </header>

  <div class="filters">
    <div class="slider-container">
      <label for="stock-slider">Select Stock:</label>
      <input
        type="range"
        id="stock-slider"
        min="0"
        [max]="stocks.length - 1"
        [(ngModel)]="selectedStockIndex"
        (ngModelChange)="onStockChange()"
      />
      <span>{{ stocks[selectedStockIndex] }}</span>
    </div>

    <div class="filter-inputs">
      <input type="date" [(ngModel)]="startDate" placeholder="Start Date" />
      <input type="date" [(ngModel)]="endDate" placeholder="End Date" />
      <input type="number" [(ngModel)]="minPrice" placeholder="Min Price" />
      <input type="number" [(ngModel)]="maxPrice" placeholder="Max Price" />
      <button (click)="applyFilters()">Filter</button>
      <button (click)="refreshData()">Refresh</button>
      <button (click)="syncNow()" [disabled]="syncing">
        {{ syncing ? 'Syncing...' : 'Sync Now' }}
      </button>
    </div>
  </div>

  <!-- Stock Chart Component -->
  <app-stock-chart [stockData]="filteredStockData" [selectedStock]="stocks[selectedStockIndex]">
  </app-stock-chart>

  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Open</th>
        <th>High</th>
        <th>Low</th>
        <th>Close</th>
        <th>Volume</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of filteredStockData; trackBy: trackById">
        <td>{{ data.date }}</td>
        <td>{{ data.open }}</td>
        <td>{{ data.high }}</td>
        <td>{{ data.low }}</td>
        <td>{{ data.close }}</td>
        <td>{{ data.volume }}</td>
      </tr>
    </tbody>
  </table>

  <div class="status">
    <span *ngIf="loading">Loading...</span>
    <span *ngIf="!loading && lastUpdated">Last updated: {{ lastUpdated }}</span>
  </div>
</div>
